<div id="banner" lang="en">
  {%- assign page_paths = site.pages | map: "path" -%}
  <div class="downloads">
    {%- for path in page_paths -%}
      {%- assign my_page = site.pages | where: "path", path | first -%}
      {%- if my_page.title -%}
        <span style="padding: 0px 5px;"><a href="{{ my_page.url | relative_url }}">{{ my_page.title | escape }}</a></span>
      {%- endif -%}
    {%- endfor -%}
  </div>
  <div style="line-height: 52px; padding: 0px 5px; text-transform: uppercase;">
    Preferred scripts for Tamil text:
    <form style="display: inline;">
      <select id="select-ta">
        <option value="knda" lang="ta-Knda">ಕನ್ನಡ</option>
        <option value="latn" lang="ta-Latn">Latin</option>
        <option value="mlym" lang="ta-Mlym">മലയാളം</option>
        <option value="taml" lang="ta-Taml" id="option-taml" selected>தமிழ்</option>
        <option value="telu" lang="ta-Telu">తెలుగు</option>
      </select>
    </form>
    and Sanskrit text:
    <form style="display: inline;">
      <select id="select-sa">
        <option value="deva" lang="sa-Deva">देवनागरी</option>
        <option value="gran" lang="sa-Gran" id="option-gran" selected>𑌗𑍍𑌰𑌨𑍍𑌥𑌲𑌿𑌪𑌿𑌃</option>
        <option value="latn" lang="sa-Latn">Latin</option>
      </select>
    </form>
  </div>

  <script type="module" lang="zxx">
      // Ensuring the form‐select’s change event‐handler has access to
      // both the old and new values.
      function onSelectValueChange(selector, eventHandler) {
          let previous;
          let elt = document.querySelector(selector);
          elt.addEventListener("focus", function() {
              previous = this.value;
          });
          elt.addEventListener("change", function() {
              eventHandler(previous, this.value);
              previous = this.value;
          });
      };

      import { transliterate as transliterator }
        from "https://cdn.jsdelivr.net/gh/deepestblue/SaulabhyaJS@0.2.1/src/saulabhya.min.js";
      import { transform } from "/assets/js/transform.js";

      // Adding handlers for the form‐selectsʼ change events.
      onSelectValueChange(
        "#select-ta",
        (prev, curr) => {
          transform("ta",
            transliterator.bind(undefined, prev, curr))
            (document.documentElement)
      });
      onSelectValueChange(
        "#select-sa",
        (prev, curr) => {
          transform("sa",
            transliterator.bind(undefined, prev, curr))
            (document.documentElement)
      });
  </script>
</div>
